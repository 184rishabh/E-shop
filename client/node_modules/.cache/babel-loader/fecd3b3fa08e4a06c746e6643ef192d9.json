{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment}from'react';import{useEffect,useState}from'react';import{isauthenticated}from'../auth/authenticate';import NAV from'../components/nav';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EDITPRODUCT(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setproduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),change=_useState4[0],setchange=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),sucess=_useState6[0],setsucess=_useState6[1];var getallproduct=function getallproduct(){return fetch('http://localhost:5000/api/product/',{method:\"GET\"}).then(function(response){return response.json();}).catch(function(err){console.log(err);});};useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getallproduct();case 2:data=_context.sent;setproduct(data);case 4:case\"end\":return _context.stop();}}},_callee);})),[change]);var token=isauthenticated();var deleteproduct=function deleteproduct(id){return fetch(\"http://localhost:5000/api/product/\".concat(id),{method:\"DELETE\",headers:{Accept:'application/json',\"content-type\":\"application/json\",token:\"Bearer \".concat(token.token)}}).then(function(response){return response.json();}).catch(function(err){console.log(err);});};var deleteproductbtn=function deleteproductbtn(id){console.log(id);deleteproduct(id).then(function(data){if(data.error){console.log(data);}else{console.log(data);setchange(\"\");setsucess(true);console.log(\"error\");}});};var showsuccess=function showsuccess(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",style:{display:sucess?'':'none'},children:\"product deleted!\"});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(NAV,{}),/*#__PURE__*/_jsxs(\"div\",{children:[showsuccess(),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 mb-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-evenly\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 pt-2 pb-2\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-arrow-left\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"/admin\",children:\"Go back to admin page\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 pt-2 pb-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/admin/editproduct\",children:\"Delete product\"}),\" \",/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-arrow-right\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 pt-2 pb-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/admin/viewuser\",children:\"View users\"}),\" \",/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-arrow-right\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"container admin-product\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row mt-5\",children:product.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{class:\"col-md-3\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"card product-top\",children:/*#__PURE__*/_jsx(\"img\",{src:item.img,alt:\"\",class:\"img-fluid\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){deleteproductbtn(\"\".concat(item._id));},class:\"btn btn-outline-danger mt-2 mb-2\",children:\"Delete\"})})]});})})})]})]});}export default EDITPRODUCT;","map":{"version":3,"sources":["/Users/rishabh/Desktop/E-shop/e-shop/client/src/admin/editproduct.js"],"names":["React","Fragment","useEffect","useState","isauthenticated","NAV","EDITPRODUCT","product","setproduct","change","setchange","sucess","setsucess","getallproduct","fetch","method","then","response","json","catch","err","console","log","data","token","deleteproduct","id","headers","Accept","deleteproductbtn","error","showsuccess","display","map","item","img","_id"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react'\nimport { useEffect, useState } from 'react'\nimport { isauthenticated } from '../auth/authenticate'\nimport NAV from '../components/nav';\n\nfunction EDITPRODUCT() {\n    const [product, setproduct] = useState([]);\n    const [change,setchange]=useState([])\n    const [sucess,setsucess]=useState(false)\n\n    const getallproduct=()=>{\n        return fetch('http://localhost:5000/api/product/',{\n            method:\"GET\"\n        }).then(response=>{\n            return response.json();\n        }).catch(err=>{\n            console.log(err);\n        })\n    }\n\n    useEffect(async() => {\n        const data=await getallproduct()\n        setproduct(data)\n    }, [change])\n\n    const token=isauthenticated()\n\n    const deleteproduct=(id)=>{\n        return fetch(`http://localhost:5000/api/product/${id}`,{\n            method:\"DELETE\",\n            headers:{\n                Accept:'application/json',\n                \"content-type\":\"application/json\",\n                token:`Bearer ${token.token}`\n            }\n        }).then(response=>{\n            return response.json();\n        }).catch(err=>{\n            console.log(err);\n        })\n    }\n\n    const deleteproductbtn=(id)=>{\n        console.log(id)\n        deleteproduct(id).then(data=>{\n            if(data.error)\n            {\n                console.log(data)\n            }\n            else{\n               console.log(data)\n               setchange(\"\")\n               setsucess(true)\n               console.log(\"error\")\n            }\n        })\n    }\n\n    const showsuccess=()=>(\n        <div className=\"alert alert-info\" style={{display:sucess ? '':'none'}}>\n              product deleted!\n         </div>\n    );\n\n    return(\n        <Fragment>\n            <NAV/>\n            <div>\n            {\n                showsuccess()\n            }\n             <div className='container mt-5 mb-5'>\n             <div className='row justify-content-evenly'>\n                  <div className='col-md-3 pt-2 pb-2'>\n                  <i class=\"fas fa-arrow-left\"></i> <a href='/admin'>Go back to admin page</a>\n                  </div>\n                  <div className='col-md-3 pt-2 pb-2'>\n                      <a href='/admin/editproduct'>Delete product</a> <i class=\"fas fa-arrow-right\"></i>\n                  </div>\n                  <div className='col-md-3 pt-2 pb-2'>\n                    <a href='/admin/viewuser'>View users</a> <i class=\"fas fa-arrow-right\"></i>\n                  </div>\n             </div>\n             </div>\n            <div class=\"container admin-product\"> \n                    <div class=\"row mt-5\">\n                            {\n                                product.map(item=>(\n                                    <div class=\"col-md-3\">\n\n                                 <div class=\"card product-top\">\n                                 <img src={item.img} alt=\"\" class=\"img-fluid\"/>\n                                 </div>\n\n                                 <div class=\"text-center\">\n\n                                 <button type=\"button\" onClick={()=>{deleteproductbtn(`${item._id}`)}} class=\"btn btn-outline-danger mt-2 mb-2\">Delete</button>\n                                </div>\n                               </div>\n                                ))\n                            }\n                    </div>\n            </div>\n\n        </div>\n        </Fragment>\n    )\n}\n\nexport default EDITPRODUCT\n"]},"metadata":{},"sourceType":"module"}