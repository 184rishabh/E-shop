{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment}from'react';import NAV from'../components/nav';import{useState,useEffect}from'react';import axios from'axios';import{isauthenticated}from'../auth/authenticate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ORDER(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setorder=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setstatus=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),orderupdated=_useState6[0],setorderupdated=_useState6[1];var token=isauthenticated().token;useEffect(function(){setorderupdated(false);var fetchdata=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:5000/api/order/',{headers:{token:\"Bearer \".concat(token)}});case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setorder(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchdata(){return _ref.apply(this,arguments);};}();fetchdata();},[orderupdated]);var updateorderapi=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(order,id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",fetch(\"http://localhost:5000/api/order/\".concat(id),{method:\"PUT\",headers:{Accept:'application/json',\"content-type\":\"application/json\",token:\"Bearer \".concat(token)},body:JSON.stringify(order)}).then(function(response){return response.json();}).catch(function(err){console.log(err);}));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateorderapi(_x,_x2){return _ref2.apply(this,arguments);};}();var orderupdate=function orderupdate(item,stat){console.log(\"item\");console.log(item);var id=item._id;console.log(item.paymentid);console.log(item.userid);console.log(item.products);console.log(item.amount);console.log(item.address);console.log(stat);updateorderapi({paymentid:item.paymentid,userid:item.userid,products:item.products,amount:item.amount,address:item.address,status:stat},id).then(function(data){if(data.error){console.log(data);}else{console.log(data);setorderupdated(true);}});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(NAV,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"orders page\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-evenly\",children:order.map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{class:\"card mt-4 mb-4\",style:{width:\"18rem\"},children:/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsxs(\"h4\",{class:\"card-title\",children:[\"Order \",index+1]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-1 mb-3\"}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Payment Id-\",item.paymentid]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Amount-\",item.amount]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Address-\",item.address]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Status-\",item.status]}),/*#__PURE__*/_jsxs(\"select\",{className:\"mt-1 mb-1\",onChange:function onChange(e){setstatus(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{selected:true,children:\"select status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"delivered\",children:\"Delivered\"}),/*#__PURE__*/_jsx(\"option\",{value:\"On the way\",children:\"On the way\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){orderupdate(item,status);},className:\"btn btn-danger mt-2 mb-2\",children:\"Edit status\"})]})});})})]})]});}export default ORDER;","map":{"version":3,"sources":["/Users/rishabh/Desktop/E-shop/e-shop/client/src/admin/orders.js"],"names":["React","Fragment","NAV","useState","useEffect","axios","isauthenticated","ORDER","order","setorder","status","setstatus","orderupdated","setorderupdated","token","fetchdata","get","headers","data","updateorderapi","id","fetch","method","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","orderupdate","item","stat","_id","paymentid","userid","products","amount","address","error","map","index","width","e","target","value"],"mappings":"uXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,OAASC,QAAT,CAAkBC,SAAlB,KAAmC,OAAnC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,eAAT,KAAgC,sBAAhC,C,wFAEA,QAASC,CAAAA,KAAT,EAAiB,CAEb,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAA4BN,QAAQ,CAAC,EAAD,CAApC,yCAAOO,MAAP,eAAeC,SAAf,eACA,eAAwCR,QAAQ,CAAC,KAAD,CAAhD,yCAAOS,YAAP,eAAqBC,eAArB,eACA,GAAMC,CAAAA,KAAK,CAACR,eAAe,GAAGQ,KAA9B,CACAV,SAAS,CAAC,UAAM,CACZS,eAAe,CAAC,KAAD,CAAf,CACA,GAAME,CAAAA,SAAS,0FAAC,mLACOV,CAAAA,KAAK,CAACW,GAAN,CAAU,kCAAV,CAA6C,CAC5DC,OAAO,CAAE,CACNH,KAAK,kBAAWA,KAAX,CADC,CADmD,CAA7C,CADP,uCACLI,IADK,kBACLA,IADK,CAMZT,QAAQ,CAACS,IAAD,CAAR,CANY,sDAAD,kBAATH,CAAAA,SAAS,0CAAf,CAQIA,SAAS,GAChB,CAXQ,CAWN,CAACH,YAAD,CAXM,CAAT,CAaA,GAAMO,CAAAA,cAAc,2FAAC,kBAAMX,KAAN,CAAYY,EAAZ,uJACVC,KAAK,2CAAoCD,EAApC,EAAyC,CACjDE,MAAM,CAAC,KAD0C,CAEjDL,OAAO,CAAC,CACJM,MAAM,CAAC,kBADH,CAEJ,eAAe,kBAFX,CAGJT,KAAK,kBAAWA,KAAX,CAHD,CAFyC,CAOjDU,IAAI,CAACC,IAAI,CAACC,SAAL,CAAelB,KAAf,CAP4C,CAAzC,CAAL,CAQJmB,IARI,CAQC,SAAAC,QAAQ,CAAE,CACd,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CAVM,EAUJC,KAVI,CAUE,SAAAC,GAAG,CAAE,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAZM,CADU,0DAAD,kBAAdZ,CAAAA,cAAc,iDAApB,CAgBE,GAAMe,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACC,IAAD,CAAMC,IAAN,CAAa,CAC7BJ,OAAO,CAACC,GAAR,CAAY,MAAZ,EACAD,OAAO,CAACC,GAAR,CAAYE,IAAZ,EACA,GAAMf,CAAAA,EAAE,CAACe,IAAI,CAACE,GAAd,CACAL,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACG,SAAjB,EACAN,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACI,MAAjB,EACAP,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACK,QAAjB,EACAR,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACM,MAAjB,EACAT,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACO,OAAjB,EACAV,OAAO,CAACC,GAAR,CAAYG,IAAZ,EACAjB,cAAc,CAAC,CAACmB,SAAS,CAACH,IAAI,CAACG,SAAhB,CAA0BC,MAAM,CAACJ,IAAI,CAACI,MAAtC,CAA6CC,QAAQ,CAACL,IAAI,CAACK,QAA3D,CAAoEC,MAAM,CAACN,IAAI,CAACM,MAAhF,CAAuFC,OAAO,CAACP,IAAI,CAACO,OAApG,CAA4GhC,MAAM,CAAC0B,IAAnH,CAAD,CAA0HhB,EAA1H,CAAd,CAA4IO,IAA5I,CAAiJ,SAAAT,IAAI,CAAE,CACtJ,GAAGA,IAAI,CAACyB,KAAR,CACC,CACIX,OAAO,CAACC,GAAR,CAAYf,IAAZ,EACH,CAHF,IAIK,CACHc,OAAO,CAACC,GAAR,CAAYf,IAAZ,EACAL,eAAe,CAAC,IAAD,CAAf,CACA,CACD,CATF,EAWF,CArBA,CAwBF,mBACG,MAAC,QAAD,yBACK,KAAC,GAAD,IADL,cAGC,aAAK,SAAS,CAAC,uBAAf,wBACI,mCADJ,cAEI,YAAK,SAAS,CAAC,4BAAf,UAIGL,KAAK,CAACoC,GAAN,CAAU,SAACT,IAAD,CAAMU,KAAN,qBACT,YAAK,KAAK,CAAC,gBAAX,CAA4B,KAAK,CAAE,CAACC,KAAK,CAAE,OAAR,CAAnC,uBACA,aAAK,KAAK,CAAC,WAAX,wBACI,YAAI,KAAK,CAAC,YAAV,oBAA8BD,KAAK,CAAC,CAApC,GADJ,cAEI,WAAI,SAAS,CAAC,WAAd,EAFJ,cAGI,oCAAgBV,IAAI,CAACG,SAArB,GAHJ,cAII,gCAAYH,IAAI,CAACM,MAAjB,GAJJ,cAKI,iCAAaN,IAAI,CAACO,OAAlB,GALJ,cAMI,gCAAYP,IAAI,CAACzB,MAAjB,GANJ,cAQI,gBAAQ,SAAS,CAAC,WAAlB,CAA8B,QAAQ,CAAE,kBAACqC,CAAD,CAAK,CAACpC,SAAS,CAACoC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT,CAA0B,CAAxE,wBACI,eAAQ,QAAQ,KAAhB,2BADJ,cAII,eAAQ,KAAK,CAAC,SAAd,qBAJJ,cAOI,eAAQ,KAAK,CAAC,WAAd,uBAPJ,cAUI,eAAQ,KAAK,CAAC,YAAd,wBAVJ,GARJ,cAsBI,eAAQ,OAAO,CAAE,kBAAI,CAACf,WAAW,CAACC,IAAD,CAAMzB,MAAN,CAAX,CAAyB,CAA/C,CAAiD,SAAS,CAAC,0BAA3D,yBAtBJ,GADA,EADS,EAAV,CAJH,EAFJ,GAHD,GADH,CAgDH,CAED,cAAeH,CAAAA,KAAf","sourcesContent":["import React, { Fragment } from 'react'\nimport NAV from '../components/nav'\nimport { useState,useEffect } from 'react'\nimport axios from 'axios'\nimport { isauthenticated } from '../auth/authenticate'\n\nfunction ORDER() {\n\n    const [order, setorder] = useState([])\n    const [status, setstatus] = useState(\"\")\n    const [orderupdated, setorderupdated] = useState(false)\n    const token=isauthenticated().token;\n    useEffect(() => {\n        setorderupdated(false)\n        const fetchdata=async()=>{\n            const {data}=await axios.get('http://localhost:5000/api/order/',{\n                headers: {\n                   token:`Bearer ${token}`\n                  }\n            })\n            setorder(data)\n            }\n            fetchdata()\n    }, [orderupdated])\n  \n    const updateorderapi=async(order,id)=>{\n        return fetch(`http://localhost:5000/api/order/${id}`,{\n            method:\"PUT\",\n            headers:{\n                Accept:'application/json',\n                \"content-type\":\"application/json\",\n                token:`Bearer ${token}`\n            },\n            body:JSON.stringify(order)\n        }).then(response=>{\n            return response.json();\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n  \n      const orderupdate=(item,stat)=>{\n        console.log(\"item\")\n        console.log(item)\n        const id=item._id\n        console.log(item.paymentid)\n        console.log(item.userid)\n        console.log(item.products)\n        console.log(item.amount)\n        console.log(item.address)\n        console.log(stat)\n        updateorderapi({paymentid:item.paymentid,userid:item.userid,products:item.products,amount:item.amount,address:item.address,status:stat},id).then(data=>{\n         if(data.error)\n          {\n              console.log(data)\n          }\n          else{\n           console.log(data)\n           setorderupdated(true)\n          }\n         })\n     \n     }\n\n\n    return (\n       <Fragment>\n            <NAV></NAV>\n           \n        <div className='container text-center'>\n            <h2>orders page</h2>\n            <div className='row justify-content-evenly'>\n                                  \n           {\n               \n               order.map((item,index)=>(\n                <div class=\"card mt-4 mb-4\" style={{width: \"18rem\"}}>\n                <div class=\"card-body\">\n                    <h4 class=\"card-title\">Order {index+1}</h4>\n                    <hr className='mt-1 mb-3'></hr>\n                    <h6>Payment Id-{item.paymentid}</h6>\n                    <h6>Amount-{item.amount}</h6>\n                    <h6>Address-{item.address}</h6>\n                    <h6>Status-{item.status}</h6>\n                    \n                    <select className='mt-1 mb-1' onChange={(e)=>{setstatus(e.target.value)}}>\n                        <option selected>\n                            select status\n                        </option>\n                        <option value=\"pending\">\n                            Pending\n                        </option>\n                        <option value=\"delivered\">\n                           Delivered\n                        </option>\n                        <option value=\"On the way\">\n                           On the way\n                        </option>\n                    </select>\n                    <button onClick={()=>{orderupdate(item,status)}} className='btn btn-danger mt-2 mb-2'>Edit status</button>\n                </div>\n               </div>\n               ))\n           }\n\n\n\n\n\n            </div> \n        </div>\n       </Fragment>\n    )\n}\n\nexport default ORDER\n"]},"metadata":{},"sourceType":"module"}