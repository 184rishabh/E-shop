{"ast":null,"code":"import _slicedToArray from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState}from'react';import{isauthenticated}from'../auth/authenticate';import NAV from'../components/nav';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function USERUPDATE(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),newpass=_useState2[0],setnewpass=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),sucess=_useState4[0],setsucess=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],seterror=_useState6[1];var user=isauthenticated();var id=user.user._id;var usertoken=user.token;var updatepassword=function updatepassword(user){return fetch(\"http://localhost:5000/api/user/\".concat(id),{method:\"PUT\",headers:{Accept:'application/json',\"content-type\":\"application/json\",token:\"Bearer \".concat(usertoken)},body:JSON.stringify(user)}).then(function(response){return response.json();}).catch(function(err){console.log(err);});};var clickupdate=function clickupdate(){updatepassword({username:user.user.username,password:newpass}).then(function(data){if(data.error){console.log(data);seterror(true);}else{setsucess(true);}});};var showsuccess=function showsuccess(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",style:{display:sucess?'':'none'},children:\"succesfully updated\"});};var showerror=function showerror(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",style:{display:error?'':'none'},children:\"something went wrong\"});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(NAV,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2\",children:\"You can update your password\"}),showerror(),showsuccess(),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-5\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"inputPassword\",class:\"form-label\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Password\"})}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setnewpass(e.target.value);},value:newpass,type:\"password\",id:\"inputPassword\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-text\",children:\"Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clickupdate,className:\"btn btn-primary mt-3\",children:\"set password\"})]})})})]})]});}export default USERUPDATE;","map":{"version":3,"sources":["/Users/rishabh/Desktop/E-shop/e-shop/client/src/account/userupdate.js"],"names":["React","Fragment","useState","isauthenticated","NAV","USERUPDATE","newpass","setnewpass","sucess","setsucess","error","seterror","user","id","_id","usertoken","token","updatepassword","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","catch","err","console","log","clickupdate","username","password","data","showsuccess","display","showerror","e","target","value"],"mappings":"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","sourcesContent":["import React,{Fragment, useState} from 'react'\nimport { isauthenticated } from '../auth/authenticate'\nimport NAV from '../components/nav'\n\nfunction USERUPDATE() {\n\n    const [newpass, setnewpass] = useState()\n    const [sucess,setsucess]=useState(false)\n    const [error, seterror] = useState(false)\n \n    const user=isauthenticated()\n    const id=user.user._id\n    const usertoken=user.token\n\n    const updatepassword=(user)=>{\n        return fetch(`http://localhost:5000/api/user/${id}`,{\n            method:\"PUT\",\n            headers:{\n                Accept:'application/json',\n                \"content-type\":\"application/json\",\n                token:`Bearer ${usertoken}`\n            },\n            body:JSON.stringify(user)\n        }).then(response=>{\n            return response.json();\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n    \n    const clickupdate=()=>{\n       updatepassword({username:user.user.username,password:newpass}).then(data=>{\n        if(data.error)\n        {\n            console.log(data)\n            seterror(true)\n        }\n        else{\n           setsucess(true)\n        }\n           \n       })\n    }\n    const showsuccess=()=>(\n\n        \n            <div className=\"alert alert-info\" style={{display:sucess ? '':'none'}}>\n              succesfully updated\n           </div>\n      \n    );\n\n    const showerror=()=>(\n        <div className=\"alert alert-info\" style={{display:error ? '':'none'}}>\n              something went wrong\n         </div>\n    );\n\n    return (\n        <Fragment>\n            <NAV></NAV>\n            <div className=\"mt-5\">\n           <h1 className=\"mt-2\">You can update your password</h1>\n           {showerror()}\n           {\n               showsuccess()\n           }\n           <div className=\"container mt-5\">\n               <div className=\"row justify-content-center\">\n                   <div className=\"col-md-5\">\n                        <label for=\"inputPassword\" class=\"form-label\"><h3>Password</h3></label>\n                        <input onChange={(e) => setnewpass(e.target.value)} value ={newpass} type=\"password\" id=\"inputPassword\" className=\"form-control\"/>\n                        <div className=\"form-text\">\n                                Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.\n                        </div>\n                        <button onClick={clickupdate} className=\"btn btn-primary mt-3\">set password</button>\n                   </div>\n               </div>\n\n           </div>\n        </div>\n        </Fragment>\n    )\n}\n\nexport default USERUPDATE\n"]},"metadata":{},"sourceType":"module"}