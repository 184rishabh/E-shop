{"ast":null,"code":"import _slicedToArray from\"/Users/rishabh/Desktop/E-shop/e-shop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment}from'react';import{isauthenticated}from'../auth/authenticate';import{useEffect,useState}from'react';import{Redirect}from'react-router';import NAV from'../components/nav';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function USERDASHBOARD(){var user=isauthenticated().user;var token=isauthenticated().token;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sucess=_useState2[0],setsucess=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],seterror=_useState4[1];var deleteuser=function deleteuser(id){return fetch(\"http://localhost:5000/api/user/\".concat(id),{method:\"DELETE\",headers:{\"content-type\":\"application/json\",token:\"Bearer \".concat(token)}}).then(function(response){return response.json();}).catch(function(err){console.log(err);});};var deleteuserbtn=function deleteuserbtn(id){deleteuser(id).then(function(data){if(data.error){console.log(data);seterror(true);}else{setsucess(true);}});};var showsuccess=function showsuccess(){if(sucess){localStorage.removeItem(\"jwt\");return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}};var showerror=function showerror(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",style:{display:error?'':'none'},children:\"something went wrong\"});};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(NAV,{}),/*#__PURE__*/_jsxs(\"div\",{children:[showerror(),showsuccess(),/*#__PURE__*/_jsx(\"div\",{className:\"mt-5\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"go back to user dashboard\"})})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger my-5\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/user/update\",children:\"Set new password\"})})]})]});}export default USERDASHBOARD;","map":{"version":3,"sources":["/Users/rishabh/Desktop/E-shop/e-shop/client/src/account/userdashboard.js"],"names":["React","Fragment","isauthenticated","useEffect","useState","Redirect","NAV","USERDASHBOARD","user","token","sucess","setsucess","error","seterror","deleteuser","id","fetch","method","headers","then","response","json","catch","err","console","log","deleteuserbtn","data","showsuccess","localStorage","removeItem","showerror","display"],"mappings":"8HAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,eAAT,KAAgC,sBAAhC,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,C,wFAEA,QAASC,CAAAA,aAAT,EAAyB,CAErB,GAAMC,CAAAA,IAAI,CAACN,eAAe,GAAGM,IAA7B,CACA,GAAMC,CAAAA,KAAK,CAACP,eAAe,GAAGO,KAA9B,CACA,cAAyBL,QAAQ,CAAC,KAAD,CAAjC,wCAAOM,MAAP,eAAcC,SAAd,eACA,eAA0BP,QAAQ,CAAC,KAAD,CAAlC,yCAAOQ,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,UAAU,CAAC,QAAXA,CAAAA,UAAW,CAACC,EAAD,CAAM,CACnB,MAAOC,CAAAA,KAAK,0CAAmCD,EAAnC,EAAwC,CAChDE,MAAM,CAAC,QADyC,CAEhDC,OAAO,CAAC,CACJ,eAAe,kBADX,CAEJT,KAAK,kBAAWA,KAAX,CAFD,CAFwC,CAAxC,CAAL,CAMJU,IANI,CAMC,SAAAC,QAAQ,CAAE,CACd,MAAOA,CAAAA,QAAQ,CAACC,IAAT,EAAP,CACH,CARM,EAQJC,KARI,CAQE,SAAAC,GAAG,CAAE,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAVM,CAAP,CAWH,CAZD,CAcA,GAAMG,CAAAA,aAAa,CAAC,QAAdA,CAAAA,aAAc,CAACX,EAAD,CAAM,CACtBD,UAAU,CAACC,EAAD,CAAV,CAAeI,IAAf,CAAoB,SAAAQ,IAAI,CAAE,CACtB,GAAGA,IAAI,CAACf,KAAR,CACA,CACIY,OAAO,CAACC,GAAR,CAAYE,IAAZ,EACAd,QAAQ,CAAC,IAAD,CAAR,CACH,CAJD,IAKI,CACDF,SAAS,CAAC,IAAD,CAAT,CACF,CACJ,CATD,EAUH,CAXD,CAYA,GAAMiB,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,EAAI,CAElB,GAAGlB,MAAH,CACA,CACImB,YAAY,CAACC,UAAb,CAAwB,KAAxB,EACA,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CACJ,CAPD,CASA,GAAMC,CAAAA,SAAS,CAAC,QAAVA,CAAAA,SAAU,sBACZ,YAAK,SAAS,CAAC,kBAAf,CAAkC,KAAK,CAAE,CAACC,OAAO,CAACpB,KAAK,CAAG,EAAH,CAAM,MAApB,CAAzC,kCADY,EAAhB,CAOA,mBACI,MAAC,QAAD,yBACI,KAAC,GAAD,IADJ,cAEI,uBAEImB,SAAS,EAFb,CAKIH,WAAW,EALf,cAOA,YAAK,SAAS,CAAC,MAAf,uBACI,UAAG,IAAI,CAAC,YAAR,uBACI,iDADJ,EADJ,EAPA,cAcA,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,qBAAhC,uBAAuD,UAAG,IAAI,CAAC,cAAR,8BAAvD,EAdA,GAFJ,GADJ,CAuBH,CAED,cAAerB,CAAAA,aAAf","sourcesContent":["import React, { Fragment } from 'react'\nimport { isauthenticated } from '../auth/authenticate'\nimport { useEffect, useState } from 'react'\nimport { Redirect } from 'react-router';\nimport NAV from '../components/nav';\n\nfunction USERDASHBOARD() {\n\n    const user=isauthenticated().user;\n    const token=isauthenticated().token;\n    const [sucess,setsucess]=useState(false)\n    const [error, seterror] = useState(false)\n    \n    const deleteuser=(id)=>{\n        return fetch(`http://localhost:5000/api/user/${id}`,{\n            method:\"DELETE\",\n            headers:{\n                \"content-type\":\"application/json\",\n                token:`Bearer ${token}`\n            }\n        }).then(response=>{\n            return response.json();\n        }).catch(err=>{\n            console.log(err);\n        })\n    }\n\n    const deleteuserbtn=(id)=>{\n        deleteuser(id).then(data=>{\n            if(data.error)\n            {\n                console.log(data)\n                seterror(true)\n            }\n            else{\n               setsucess(true)\n            }\n        })\n    }\n    const showsuccess=()=>{\n\n        if(sucess)\n        {\n            localStorage.removeItem(\"jwt\")\n            return <Redirect to=\"/\" />\n        }\n    };\n\n    const showerror=()=>(\n        <div className=\"alert alert-info\" style={{display:error ? '':'none'}}>\n              something went wrong\n         </div>\n    );\n\n\n    return (\n        <Fragment>\n            <NAV></NAV>\n            <div>\n            {\n                showerror()\n            }\n            {\n                showsuccess()\n            }\n            <div className=\"mt-5\">\n                <a href=\"/dashboard\">\n                    <h2>\n                    go back to user dashboard\n                    </h2>\n                </a>\n            </div>\n            <button type=\"button\" className=\"btn btn-danger my-5\" ><a href=\"/user/update\">Set new password</a></button>\n            \n        </div>\n    \n        </Fragment>\n        )\n}\n\nexport default USERDASHBOARD\n"]},"metadata":{},"sourceType":"module"}